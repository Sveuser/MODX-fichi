Установка MODX (webesignmaster)

Установка и настройка MODx плагинов
Устанавливаем Advanced версию MODx, во время установки указываем, что папка админа будет называться super.

Маст-хэв плагины MODx
Самые популярные и наиболее часто используемые дополнения для MODx:

---------------------------------------------------------------------------------------------------------------

Ace - редактор кода MODx;
Collections - отображение и управление коллекциями ресурсов;
pdoTools - набор базовых инструментов MODx;
FormIt - работа с формами в MODx;
phpThumbOf - работа с изображениями в MODx;
TinyMCE / CKEditor (на выбор) - текстовый WYSIWYG редактор для MODx;
translit - транслитерация URL в MODx;
MIGX - Добавляемые дополнительные поля в MODx;
AutoTemplate - "Умное" автоматическое назначение шаблонов ресурсам.

*
tagElementPlugin – плагин, который позволяет редактировать чанк или сниппет по выделению 
его тега и нажатию сочетаний клавиш ctrl+enter. Очень удобная штука, 
только с одним минусом – работает только в редакторе ACE.

---------------------------------------------------------------------------------------------------------------

Базовые настройки MODx Revolution
Переходим в "Системные настройки".

Раздел: Дружественные URL
Транслитерация псевдонимов: russian;
Использовать дружественные URL: Да;
Строгий режим дружественных URL: Да;
Проверять на дублирование URI во всех контекстах: Да;
Использовать вложенные URL: Да;
Не забудьте также переименовать ht.access в .htaccess в корне сайта.

Раздел: Панель управления
Показывать описание в верхнем меню: Нет.

Раздел: Сайт
Страница ошибки 404 «Документ не найден»: ID ресурса 404;
Публиковать по умолчанию: Да;
Название сайта: Название вашего проекта.

Раздел: Система и сервер
Отправлять заголовок X-Powered-By: Нет.

Пространство имен: ace
Размер шрифта: 18px;
Мягкая табуляция: Нет;
Размер табуляции: 2;
Тема редактора (на выбор): ambiance, chaos, chrome, clouds, clouds_midnight, cobalt, crimson_editor, dawn, dreamweaver, eclipse, github, idle_fingers, katzenmilch, kr, kuroir, merbivore, merbivore_soft, mono_industrial, monokai, pastel_on_dark, solarized_dark, solarized_light, terminal, textmate, tomorrow, tomorrow_night, tomorrow_night_blue, tomorrow_night_bright, tomorrow_night_eighties, twilight, vibrant_ink, xcode;
Кроме того, вы можете сделать тему Material в редакторе Ace: инструкция.

-------------------------------------------------------------------------------------------------------------

Создаваемые базовые ресурсы

Содержимое сниппета host:

<?php
echo $_SERVER['HTTP_HOST'];

******************************************************************

Содержимое robots.txt для MODx с использованием сниппета host:

User-agent: *
Disallow: /super/
Disallow: /assets/components/
Disallow: /core/
Disallow: /connectors/
Disallow: /index.php
Disallow: /index.html
Disallow: /index
Disallow: *?
Host: [[host]]
Sitemap: http://[[host]]/sitemap.xml

******************************************************************

sitemap.xml

[[pdoSitemap]]

----------------------------------------------------------------------------

Настройка прав доступа для контент-менеджера в MODX Revolution

Полный алгоритм действий по настройке прав контент менеджера MODx

1. Создание нового пользователя и назначение прав
Переходим в меню: "Настройки" > "Контроль доступа"
Переходим на вкладку "Политики доступа"
Копируем "Content Editor", редактируем и называем новую политику "Менеджер"
Устанавливаем разрешения:
Установить галку "Изменять права доступа (chmod) к каталогам"
Установить галку "Создавать каталоги в файловой системе"
Установить галку "Получать список подкаталогов для каталога в файловой системе"
Установить галку "Переименовывать каталоги в файловой системе"
Установить галку "Создавать файлы"
Установить галку "Смотреть список файлов в определенном каталоге"
Установить галку "Использовать диспетчер файлов"
Установить галку "Удалять файлы"
Установить галку "Видеть дерево файлов в левой навигационной панели"
Установить галку "Изменять файлы"
Установить галку "Загружать файлы в папку"
Установить галку "Просматривать содержимое файла"
Установить галку "Использовать пакеты в системе управления пакетами"
Установить галку "Использовать страницу «Поиск»"
Сохранить.
Переходим в меню: "Настройки" > "Контроль доступа"
Переходим на вкладку: "Группы пользователей & Пользователи"
Создаем новую группу пользователей и задаем имя "Контент менеджеры"
Устанавливаем в окне новой группы пользователей контексты web, mgr
Политика бэкэнда в окне новой группы: "Менеджер" + Сохранить
Новая группа пользователей "Контент менеджеры" > Редактировать
Переходим на вкладку: "Права доступа"
На вкладке "Доступ к контекстам" редактируем mgr, web по очереди
mgr, web > редактировать, устанавливаем "Политика доступа" как "Менеджер" + Сохранить
Переходим в меню "Управление" > "Пользователи" и создаем нового пользователя по кнопке "Новый пользователь"
Имя manager, указываем E-mail менеджера, устанавливам радиобаттон ниже как "Я укажу пароль сам" и задаем пароль
Переходим на вкладку "Права доступа" > "Добавить пользователя в группу"
Группа пользователей: "Контент Менеджеры", Роль: "Super User"
Установить чекбокс "Активный" + Сохранить
Переходим в меню "Управление" > "Перезагрузить права доступа"


2. Ограничения на просмотр файловой системы

2.1. Добавляем источник файлов
Переходим в меню: "Медиа" > "Источники файлов"
Скопируем "Filesystem"
Отредактируем скопированный источник
Название: "Images"; basePath, baseUrl: "assets/images/"
Переходим в меню: "Настройки" > "Контроль доступа"
Отредактируем группу пользователей "Контент менеджеры" правой кнопкой мыши
Переходим на вкладку: "Права доступа" > "Доступ к источнику файлов" и добавим новый источник по кнопке "Добавить источник файлов"
Источник: Images, Минимальная роль: Member - 9999, Политика доступа: Media Source Admin
Сохранить; Меню: "Управление" > "Очистить кэш"; Меню: "Управление" > "Перезагрузить права доступа"

2.2. Удаляем источник "Filesystem" для manager
Переходим в меню: "Медиа" > "Источники файлов"
Filesystem > Редактировать
Переходим на вкладку: "Права доступа", нажимаем "Добавить группу пользователей"
Группа пользователей: "Administrator", Минимальная роль: "Super User - 0", Политика: "Media Source Admin" + Сохранить
Переходим в меню: "Медиа" > "Источники файлов"
Images > Редактировать
Переходим на вкладку: "Права доступа", нажимаем "Добавить группу пользователей"
Группа пользователей: "Administrator", Минимальная роль: "Super User - 0", Политика: "Media Source Admin" + Сохранить

3. Управление группами ресурсов
Переходим в меню: "Содержимое" > "Группы ресурсов"
Создать группу ресурсов
Имя: "Администратор", Контексты: "web,mgr"
Установить галку "Автоматически дать доступ группе Administrator"
Добавить элементы в новую группу "Администратор", которые мы хотим скрыть от менеджера
Сохранить; Меню: "Управление" > "Очистить кэш"; Меню: "Управление" > "Перезагрузить права доступа"
